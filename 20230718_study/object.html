<!DOCTYPE html>
<html lang="ko">
<head>
    <title>Document</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Mijeong">
    <meta name="keywords" content="">
    <meta name="description" content="">

    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>

</head>
<body>


    <!--
        JSON(javascriptobject notation)
        데이터를 저장 표현할 때 사용한다.(경량)
        자바스크립트에서 객체 표현 방식을 사용한다.
        페이지 이동 없이, 주소 변환 없이 데이터를 저장하고 가져올 경우에 사용될 수 있다.

        웹에서 사용자가 입력한 데이터를 처리하기 위해서는 
        주소를 통해 서버에 데이터를 전달하고 처리결과를 다른 주소 또는 이전 주소로 받아서 화면에 표시해준다.
        
        JSON 데이터 형식
        키: 값 (1:1매칭)
        {"name":"이순신"};
        name: 키, 이순신: 값
        *똑같은 키(명) 쓸 수 없고 다른 키 넣어줘야함 ex) {"name":"이순신", "age":"32"};
        
        오늘 수업 
            1. json데이터 만들고 사용하기
            2. json 파일을 만들어서 데이터 읽어와서 사용하기
            3. json 데이터를 서버에 보내저장시키고 서버에 저장된 데이터를 json형식으로 가져와서 사용하기
            4. 공공데이터의 json 데이터를 가져와보기
    -->

    <h1>JSON 사용하기</h1>
    <div id="input_box">
        <input type="text" name="name" id="name" placeholder="이름">
        <input type="text" name="age" id="age" placeholder="나이">
        <input type="text" name="tel" id="tel" placeholder="연락처">
        <button id="save_bt">저장하기</button>
    </div>
    <div id="output_box">

    </div>

    <!-- 객체가 무엇인지 예시 
    <script>
        // var 여상현 = {"innerHTML":"bbb"}
        var 여상현 = {"name":"여상현", "age":28};
        여상현.age=34;
        document.write(여상현.age); // 키에 해당하는 내용 출력됨 (현재나오는 값: 28 / name 넣으면 여상현 나옴)
        여상현.gender=" 여";
        document.write(여상현.gender); // 객체가 만들어지면 추가적으로 담을 수 있음

        var div = document.getElementById("dd");
        div.innerHTML="aa"; // innerHTML도 키다.
        div.style.background="red"; // 키 이중으로 들어가있는 것이다.
        // 객체에 있는 키로 바꾼 것이다.
    </script>
    -->
</body>
</html>

<script>

    // let info = {"name":"강해민", "age":20, "tel":"01012345678"};
    // let jsoninfo = JSON.stringify(info); // 자바스크립트 객체를 JSON으로 변환

    // // JSON -> javascript 바꿔주는 것 : JSON.parse()
    // // server에 보낼 때는 JSON으로 변환하고 server로부터 받을 때는 javascript로 변환한다.
    // console.log(info);
    // console.log(jsoninfo);

    // $("#save_bt").click(save_info);
    
    // function save_info(){
    //     var name = $("#name").val();
    //     var age = $("#age").val();
    //     var tel = $("#tel").val();
    //     info.name=name;
    //     info.age=age;
    //     info.tel=tel;

    //     $("#output_box").html("이름 : " + info.name+"<br> 나이 : "+ info.age+"<br> 연락처 : "+tel);
    // }
    // 입력한 것만 나옴
    // 이전에 저장한 것까지 나오게하려면 배열 이용해서 저장해야한다.



    // json형태로 활용한다고 하면 let
    // let info = 
    // { "info1" : {"name":"강해민", "age":20, "tel":"01012345678"}, "info1" : {"name":"강해민", "age":40, "tel":"01012345678"}};
    // // info.info1.name, info.info1.age 이렇게 키 안에 키 객체를 담아 value로 저장될 수 있도록 한다.
    // // info 키가 2개 있는데 화면=> f12 에는 consol.log 에 1개밖에 안보인다()
    // // 동일한 키 저장하게 되면 마지막에 저장하는 value값만 저장. (json에서는 똑같은 이름의 키 가질 수 없다.)

    // let jsoninfo = JSON.stringify(info); // 자바스크립트 객체를 JSON으로 변환

    // // JSON -> javascript 바꿔주는 것 : JSON.parse()
    // // server에 보낼 때는 JSON으로 변환하고 server로부터 바등ㄹ 때는 javascript로 변환한다.
    // console.log(info);
    // console.log(jsoninfo);

    // $("#save_bt").click(save_info);
    
    // function save_info(){
    //     var name = $("#name").val();
    //     var age = $("#age").val();
    //     var tel = $("#tel").val();
    //     info.name=name;
    //     info.age=age;
    //     info.tel=tel;

    //     $("#output_box").html("이름 : " + info.name+"<br> 나이 : "+ info.age+"<br> 연락처 : "+tel);
    // }

    

    // 여러명 데이터 쌓는 법
    // json구조
        // {
        //     "info":[
        //         {"name":"이순신", "age":23}
        //         ,
        //         {"name":"여상현", "age":25}

        //     ]
        // }

    let info = new Array();
    info[0] = {"name":"강해민", "age":20, "tel":"01012345678"};
    // '{ "info1" : {"name":"강해민", "age":20, "tel":"01012345678"}, "info1" : {"name":"강해민", "age":40, "tel":"01012345678"}}';
    // info.info1.name, info.info1.age 이렇게 키 안에 키 객체를 담아 value로 저장될 수 있도록 한다.
    // info 키가 2개 있는데 화면=> f12 에는 consol.log 에 1개밖에 안보인다()
    // 동일한 키 저장하게 되면 마지막에 저장하는 value값만 저장. (json에서는 똑같은 이름의 키 가질 수 없다.)
    // 작은 따옴표로 전체를 묶어주면 문자열 취급

    // let jsoninfo = JSON.stringify(info); // 자바스크립트 객체를 JSON으로 변환

    // // JSON -> javascript 바꿔주는 것 : JSON.parse()
    // // server에 보낼 때는 JSON으로 변환하고 server로부터 바등ㄹ 때는 javascript로 변환한다.
    // console.log(JSON.parse(jsoninfo));
    // console.log(jsoninfo);

    $("#save_bt").click(save_info);
let cnt=0; // 전역변수
    function save_info(){
        var name = $("#name").val();
        var age = $("#age").val();
        var tel = $("#tel").val();
        info[++cnt]={"name":name,"age":age,"tel":tel};
        
        console.log(JSON.stringify({"info":info}));

        // for(var i=0; i<info.length; i++){
        //     $("#output_box").append("<br>이름 : " + info[i]+"<br> 나이 : "+ info[i]+"<br> 연락처 : "+info.[i]tel);
        // }
        $("#output_box").append("<br>이름 : " + info[cnt].name+"<br> 나이 : "+ info[cnt].age+"<br> 연락처 : "+info[cnt].tel);
        // }
    //     $("#output_box").html("이름 : " + info.name+"<br> 나이 : "+ info.age+"<br> 연락처 : "+info.tel);
    }


</script>